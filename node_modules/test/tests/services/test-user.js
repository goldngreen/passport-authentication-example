

const assert = require('assert');

const UserService = require('server/services/user').UserService;
const Database = require('server/data').Database;
const userTestData = require('test/services/test-data').user;

describe('user-service', () => {
    const testDatabase = '.data/test.sqlite';
    const database = new Database(testDatabase);
    const userService = new UserService(database);

    it('should create a user', async () => {
        const user = await userTestData.sample();
        userService.createUser(user);
    });

    it('should reject an invalid user', () => {
        const user = Object.assign({}, userTestData.sample());
        delete user.username;
        assert.throws( () => userService.createUser(user), { name: 'TypeError' } );
    });

    it('should be easy to isolate test code', () => {
    });
});